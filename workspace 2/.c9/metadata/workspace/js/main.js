{"filter":false,"title":"main.js","tooltip":"/js/main.js","undoManager":{"mark":38,"position":38,"stack":[[{"start":{"row":0,"column":0},"end":{"row":66,"column":76},"action":"insert","lines":["# Carousel variables","carouselContent = $(\".carousel__content\")","carouselIndex = 0","carouselLength = carouselContent.children().length","","isAnimating = false","itemWidth = 100 / carouselLength","firstItem = $(carouselContent.children()[0])","lastItem = $(carouselContent.children()[carouselLength - 1])","firstClone = null","lastClone = null","","# Apply the 3D transformations to avoid a white blink when you slide for the first time","carouselContent.css \"width\", carouselLength * 100 + \"%\"","carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 0","","$.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","  ","# Click on the \"Previous\" button","$(\".nav--left\").on \"click\", ->","  return if isAnimating","  isAnimating = true","    ","  carouselIndex--","  if carouselIndex == -1","    lastItem.prependTo carouselContent","    carouselContent.transition { x:\"#{(carouselIndex + 2) * -itemWidth}%\" }, 0","    carouselContent.transition { x:\"#{(carouselIndex + 1) * -itemWidth}%\" }, 1000, \"easeInOutExpo\", ->","      carouselIndex = carouselLength - 1","      lastItem.appendTo carouselContent","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0","      isAnimating = false","  else","    carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 1000, \"easeInOutExpo\", -> isAnimating = false","","# Click on the \"Next\" button","$(\".nav--right\").on \"click\", ->","  return if isAnimating","  isAnimating = true","    ","  carouselIndex++","    ","  carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 1000, \"easeInOutExpo\", ->","    isAnimating = false","    if firstClone","      carouselIndex = 0","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0","      firstClone.remove()","      firstClone = null","      ","      carouselLength = carouselContent.children().length","      itemWidth = 100 / carouselLength","      carouselContent.css \"width\", carouselLength * 100 + \"%\"","      $.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","      return","        ","    if carouselIndex == carouselLength - 1","      carouselLength++","      itemWidth = 100 / carouselLength","      ","      firstClone = firstItem.clone()","      firstClone.addClass \"clone\"","      firstClone.appendTo carouselContent","       ","      carouselContent.css \"width\", carouselLength * 100 + \"%\"","      $.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":20},"action":"remove","lines":["# Carousel variables"],"id":2}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":87},"action":"remove","lines":["# Apply the 3D transformations to avoid a white blink when you slide for the first time"],"id":3}],[{"start":{"row":18,"column":0},"end":{"row":18,"column":32},"action":"remove","lines":["# Click on the \"Previous\" button"],"id":4}],[{"start":{"row":0,"column":0},"end":{"row":66,"column":76},"action":"remove","lines":["","carouselContent = $(\".carousel__content\")","carouselIndex = 0","carouselLength = carouselContent.children().length","","isAnimating = false","itemWidth = 100 / carouselLength","firstItem = $(carouselContent.children()[0])","lastItem = $(carouselContent.children()[carouselLength - 1])","firstClone = null","lastClone = null","","","carouselContent.css \"width\", carouselLength * 100 + \"%\"","carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 0","","$.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","  ","","$(\".nav--left\").on \"click\", ->","  return if isAnimating","  isAnimating = true","    ","  carouselIndex--","  if carouselIndex == -1","    lastItem.prependTo carouselContent","    carouselContent.transition { x:\"#{(carouselIndex + 2) * -itemWidth}%\" }, 0","    carouselContent.transition { x:\"#{(carouselIndex + 1) * -itemWidth}%\" }, 1000, \"easeInOutExpo\", ->","      carouselIndex = carouselLength - 1","      lastItem.appendTo carouselContent","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0","      isAnimating = false","  else","    carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 1000, \"easeInOutExpo\", -> isAnimating = false","","# Click on the \"Next\" button","$(\".nav--right\").on \"click\", ->","  return if isAnimating","  isAnimating = true","    ","  carouselIndex++","    ","  carouselContent.transition { x:\"#{carouselIndex * -itemWidth}%\" }, 1000, \"easeInOutExpo\", ->","    isAnimating = false","    if firstClone","      carouselIndex = 0","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0","      firstClone.remove()","      firstClone = null","      ","      carouselLength = carouselContent.children().length","      itemWidth = 100 / carouselLength","      carouselContent.css \"width\", carouselLength * 100 + \"%\"","      $.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","      return","        ","    if carouselIndex == carouselLength - 1","      carouselLength++","      itemWidth = 100 / carouselLength","      ","      firstClone = firstItem.clone()","      firstClone.addClass \"clone\"","      firstClone.appendTo carouselContent","       ","      carouselContent.css \"width\", carouselLength * 100 + \"%\"","      $.each carouselContent.children(), -> $(@).css \"width\", itemWidth + \"%\"","      carouselContent.transition { x:\"#{(carouselIndex) * -itemWidth}%\" }, 0"],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":72,"column":14},"action":"insert","lines":["(function () {","    var carouselContent, carouselIndex, carouselLength, firstClone, firstItem, isAnimating, itemWidth, lastClone, lastItem;","    carouselContent = $('.carousel__content');","    carouselIndex = 0;","    carouselLength = carouselContent.children().length;","    isAnimating = false;","    itemWidth = 100 / carouselLength;","    firstItem = $(carouselContent.children()[0]);","    lastItem = $(carouselContent.children()[carouselLength - 1]);","    firstClone = null;","    lastClone = null;","    carouselContent.css('width', carouselLength * 100 + '%');","    carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","    $.each(carouselContent.children(), function () {","        return $(this).css('width', itemWidth + '%');","    });","    $('.nav--left').on('click', function () {","        if (isAnimating) {","            return;","        }","        isAnimating = true;","        carouselIndex--;","        if (carouselIndex === -1) {","            lastItem.prependTo(carouselContent);","            carouselContent.transition({ x: (carouselIndex + 2) * -itemWidth + '%' }, 0);","            return carouselContent.transition({ x: (carouselIndex + 1) * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","                carouselIndex = carouselLength - 1;","                lastItem.appendTo(carouselContent);","                carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","                return isAnimating = false;","            });","        } else {","            return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","                return isAnimating = false;","            });","        }","    });","    $('.nav--right').on('click', function () {","        if (isAnimating) {","            return;","        }","        isAnimating = true;","        carouselIndex++;","        return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","            isAnimating = false;","            if (firstClone) {","                carouselIndex = 0;","                carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","                firstClone.remove();","                firstClone = null;","                carouselLength = carouselContent.children().length;","                itemWidth = 100 / carouselLength;","                carouselContent.css('width', carouselLength * 100 + '%');","                $.each(carouselContent.children(), function () {","                    return $(this).css('width', itemWidth + '%');","                });","                return;","            }","            if (carouselIndex === carouselLength - 1) {","                carouselLength++;","                itemWidth = 100 / carouselLength;","                firstClone = firstItem.clone();","                firstClone.addClass('clone');","                firstClone.appendTo(carouselContent);","                carouselContent.css('width', carouselLength * 100 + '%');","                $.each(carouselContent.children(), function () {","                    return $(this).css('width', itemWidth + '%');","                });","                return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","            }","        });","    });","}.call(this));"],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":8}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["/"],"id":9}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["*"],"id":10}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["g"],"id":11}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["l"],"id":12}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["o"],"id":13}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["b"],"id":14}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["a"],"id":15}],[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["l"],"id":16}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["*"],"id":17}],[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["/"],"id":18}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["$"],"id":19}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":[" "],"id":20}],[{"start":{"row":0,"column":0},"end":{"row":74,"column":14},"action":"remove","lines":["/*global $*/","","(function () {","    var carouselContent, carouselIndex, carouselLength, firstClone, firstItem, isAnimating, itemWidth, lastClone, lastItem;","    carouselContent = $('.carousel__content');","    carouselIndex = 0;","    carouselLength = carouselContent.children().length;","    isAnimating = false;","    itemWidth = 100 / carouselLength;","    firstItem = $(carouselContent.children()[0]);","    lastItem = $(carouselContent.children()[carouselLength - 1]);","    firstClone = null;","    lastClone = null;","    carouselContent.css('width', carouselLength * 100 + '%');","    carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","    $.each(carouselContent.children(), function () {","        return $(this).css('width', itemWidth + '%');","    });","    $('.nav--left').on('click', function () {","        if (isAnimating) {","            return;","        }","        isAnimating = true;","        carouselIndex--;","        if (carouselIndex === -1) {","            lastItem.prependTo(carouselContent);","            carouselContent.transition({ x: (carouselIndex + 2) * -itemWidth + '%' }, 0);","            return carouselContent.transition({ x: (carouselIndex + 1) * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","                carouselIndex = carouselLength - 1;","                lastItem.appendTo(carouselContent);","                carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","                return isAnimating = false;","            });","        } else {","            return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","                return isAnimating = false;","            });","        }","    });","    $('.nav--right').on('click', function () {","        if (isAnimating) {","            return;","        }","        isAnimating = true;","        carouselIndex++;","        return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 1000, 'easeInOutExpo', function () {","            isAnimating = false;","            if (firstClone) {","                carouselIndex = 0;","                carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","                firstClone.remove();","                firstClone = null;","                carouselLength = carouselContent.children().length;","                itemWidth = 100 / carouselLength;","                carouselContent.css('width', carouselLength * 100 + '%');","                $.each(carouselContent.children(), function () {","                    return $(this).css('width', itemWidth + '%');","                });","                return;","            }","            if (carouselIndex === carouselLength - 1) {","                carouselLength++;","                itemWidth = 100 / carouselLength;","                firstClone = firstItem.clone();","                firstClone.addClass('clone');","                firstClone.appendTo(carouselContent);","                carouselContent.css('width', carouselLength * 100 + '%');","                $.each(carouselContent.children(), function () {","                    return $(this).css('width', itemWidth + '%');","                });","                return carouselContent.transition({ x: carouselIndex * -itemWidth + '%' }, 0);","            }","        });","    });","}.call(this));"],"id":21}],[{"start":{"row":0,"column":0},"end":{"row":135,"column":3},"action":"insert","lines":["'use strict';","var activeIndex = 0;","var limit = 0;","var disabled = false;","var $stage = undefined;","var $controls = undefined;","var canvas = false;","var SPIN_FORWARD_CLASS = 'js-spin-fwd';","var SPIN_BACKWARD_CLASS = 'js-spin-bwd';","var DISABLE_TRANSITIONS_CLASS = 'js-transitions-disabled';","var SPIN_DUR = 1000;","var appendControls = function appendControls() {","    for (var i = 0; i < limit; i++) {","        if (window.CP.shouldStopExecution(1)) {","            break;","        }","        $('.carousel__control').append('<a href=\"#\" data-index=\"' + i + '\"></a>');","    }","    var height = $('.carousel__control').children().last().outerHeight();","    $('.carousel__control').css('height', 30 + limit * height);","    $controls = $('.carousel__control').children();","    $controls.eq(activeIndex).addClass('active');","    window.CP.exitedLoop(1);","};","var setIndexes = function setIndexes() {","    $('.spinner').children().each(function (i, el) {","        $(el).attr('data-index', i);","        limit++;","    });","};","var duplicateSpinner = function duplicateSpinner() {","    var $el = $('.spinner').parent();","    var html = $('.spinner').parent().html();","    $el.append(html);","    $('.spinner').last().addClass('spinner--right');","    $('.spinner--right').removeClass('spinner--left');","};","var paintFaces = function paintFaces() {","    $('.spinner__face').each(function (i, el) {","        var $el = $(el);","        var color = $(el).attr('data-bg');","        $el.children().css('backgroundImage', 'url(' + getBase64PixelByColor(color) + ')');","    });","};","var getBase64PixelByColor = function getBase64PixelByColor(hex) {","    if (!canvas) {","        canvas = document.createElement('canvas');","        canvas.height = 1;","        canvas.width = 1;","    }","    if (canvas.getContext) {","        var ctx = canvas.getContext('2d');","        ctx.fillStyle = hex;","        ctx.fillRect(0, 0, 1, 1);","        return canvas.toDataURL();","    }","    return false;","};","var prepareDom = function prepareDom() {","    setIndexes();","    paintFaces();","    duplicateSpinner();","    appendControls();","};","var spin = function spin() {","    var inc = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];","    if (disabled)","        return;","    if (!inc)","        return;","    activeIndex += inc;","    disabled = true;","    if (activeIndex >= limit) {","        activeIndex = 0;","    }","    if (activeIndex < 0) {","        activeIndex = limit - 1;","    }","    var $activeEls = $('.spinner__face.js-active');","    var $nextEls = $('.spinner__face[data-index=' + activeIndex + ']');","    $nextEls.addClass('js-next');","    if (inc > 0) {","        $stage.addClass(SPIN_FORWARD_CLASS);","    } else {","        $stage.addClass(SPIN_BACKWARD_CLASS);","    }","    $controls.removeClass('active');","    $controls.eq(activeIndex).addClass('active');","    setTimeout(function () {","        spinCallback(inc);","    }, SPIN_DUR, inc);","};","var spinCallback = function spinCallback(inc) {","    $('.js-active').removeClass('js-active');","    $('.js-next').removeClass('js-next').addClass('js-active');","    $stage.addClass(DISABLE_TRANSITIONS_CLASS).removeClass(SPIN_FORWARD_CLASS).removeClass(SPIN_BACKWARD_CLASS);","    $('.js-active').each(function (i, el) {","        var $el = $(el);","        $el.prependTo($el.parent());","    });","    setTimeout(function () {","        $stage.removeClass(DISABLE_TRANSITIONS_CLASS);","        disabled = false;","    }, 100);","};","var attachListeners = function attachListeners() {","    document.onkeyup = function (e) {","        switch (e.keyCode) {","        case 38:","            spin(-1);","            break;","        case 40:","            spin(1);","            break;","        }","    };","    $controls.on('click', function (e) {","        e.preventDefault();","        if (disabled)","            return;","        var $el = $(e.target);","        var toIndex = parseInt($el.attr('data-index'), 10);","        spin(toIndex - activeIndex);","    });","};","var assignEls = function assignEls() {","    $stage = $('.carousel__stage');","};","var init = function init() {","    assignEls();","    prepareDom();","    attachListeners();","};","$(function () {","    init();","});"],"id":22}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["'"],"id":23},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":24}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["'"],"id":25}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["/"],"id":26}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["*"],"id":27}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["b"],"id":28}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["b"],"id":29}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["g"],"id":30}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["l"],"id":31}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["o"],"id":32}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["b"],"id":33}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["a"],"id":34}],[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["l"],"id":35}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["$"],"id":37}],[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["*"],"id":38}],[{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"insert","lines":["/"],"id":39}]]},"ace":{"folds":[],"scrolltop":2012,"scrollleft":0,"selection":{"start":{"row":6,"column":23},"end":{"row":6,"column":23},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":32,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1485284742645,"hash":"e45f9a61993df098fa5f316bc2b97c7379c1cd72"}